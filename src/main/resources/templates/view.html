<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" type="text/css" th:href="@{css/view.css}"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

    <!--    <script type="text/javascript" th:src="@{js/logic.js}"></script>-->

</head>
<body>




<nav class="main-menu">



    <div>
        <a class="logo" href="http://startific.com"><i class="fa fa-search"></i>
        </a>
    </div>
    <div class="settings"></div>
    <div class="scrollbar" id="style-1">

        <ul>

            <li>
                <a th:href="@{home}">
                    <i class="fa fa-home fa-lg">
                    </i>
                    <span class="nav-text">Home</span>
                </a>
            </li>

            <li>
                <a th:href="@{searchpage}">
                    <i class="fa fa-search fa-lg"></i>
                    <span class="nav-text">Login</span>
                </a>
            </li>


            <li>
                <a href="http://startific.com">
                    <i class="fa fa-envelope-o fa-lg"></i>
                    <span class="nav-text">Contact</span>
                </a>
            </li>

            <li class="darkerli">
                <a href="http://startific.com">
                    <i class="fa fa-shopping-cart"></i>
                    <span class="nav-text">Shopping</span>
                </a>
            </li>

            <li class="darkerli">
                <a href="http://startific.com">
                    <i class="fa fa-microphone fa-lg"></i>
                    <span class="nav-text">Film & Music</span>
                </a>
            </li>

            <li class="darkerli">
                <a href="http://startific.com">
                    <i class="fa fa-flask fa-lg"></i>
                    <span class="nav-text">Web Tools</span>
                </a>
            </li>

            <li class="darkerli">
                <a href="http://startific.com">
                    <i class="fa fa-picture-o fa-lg"></i>
                    <span class="nav-text">Art & Design</span>
                </a>
            </li>

            <li class="darkerli">
                <a href="http://startific.com">
                    <i class="fa fa-align-left fa-lg"></i>
                    <span class="nav-text">Magazine</span>
                </a>
            </li>

            <li class="darkerli">
                <a href="http://startific.com">
                    <i class="fa fa-gamepad fa-lg"></i>
                    <span class="nav-text">Games</span>
                </a>
            </li>

            <li class="darkerli">
                <a href="http://startific.com">
                    <i class="fa fa-glass fa-lg"></i>
                    <span class="nav-text">Life & Style</span>
                </a>
            </li>

            <li class="darkerlishadowdown">
                <a href="http://startific.com">
                    <i class="fa fa-rocket fa-lg"></i>
                    <span class="nav-text">Fun</span>
                </a>
            </li>


        </ul>


        <li>

            <a href="http://startific.com">
                <i class="fa fa-question-circle fa-lg"></i>
                <span class="nav-text">Help</span>
            </a>
        </li>


        <ul class="logout">
            <li>
                <a href="http://startific.com">
                    <i class="fa fa-lightbulb-o fa-lg"></i>
                    <span class="nav-text">
                            BLOG
                        </span>

                </a>
            </li>
        </ul>
    </div>
</nav>

<!-- parallax text/java -->


        <!-- text -->

<!--<section class="gallery">-->
<!--                <div class="container">-->
<!--                    <div class="toolbar">-->
<!--                        <div class="search-wrapper">-->
<!--                            <input type="search" placeholder="Search for Books">-->
<!--                            <div class="counter">-->
<!--                                Total Books: <span>12</span></div>-->
<!--                        </div>-->
<!--                        <input type="text" id="searchInput" placeholder="Search by book title..." />-->

<!--                        <ul class="view-options">-->
<!--                            <li class="zoom">-->
<!--                                <input type="range" min="180" max="380" value="280">-->
<!--                            </li>-->

<!--                            <li class="show-grid active">-->
<!--                                <button disabled >-->
<!--                                    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/grid-view.svg" alt="grid view">-->
<!--                                </button>-->
<!--                            </li>-->
<!--                            <li class="show-list">-->
<!--                                <button>-->
<!--                                    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/list-view.svg" alt="list view">-->
<!--                                </button>-->
<!--                            </li>-->
<!--                        </ul>-->
<!--                    </div>-->
<!--&lt;!&ndash;                    <div id="searchResults" class="container">&ndash;&gt;-->
<!--&lt;!&ndash;                        <ol class="image-list list-view"></ol>&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->

<!--                    <div id="searchResultsContainer" class="search-results-container">-->
<!--                        <ol id="searchResults" class="image-list list-view search-results-list"></ol>-->
<!--                    </div>-->
<!--                    <ol class="image-list list-view">-->
<!--                        <li th:each="book: ${books}">-->
<!--                            <figure>-->
<!--                                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/unsplash_nature1.jpg" alt="">-->
<!--                                <figcaption>-->

<!--                                    <p th:text="${book.title}"></p>-->
<!--                                    <p th:text="${'Written By '+book.author}"> <a href="https://unsplash.com/@redcharlie" target="_blank"></a></p>-->
<!--                                    <span><p th:text="${'#'+book.isbn}"></p></span>-->
<!--                                    <p th:text="${book.status}"></p>-->


<!--                                </figcaption>-->
<!--                            </figure>-->
<!--                        </li>-->
<!--                        <li>-->
<!--                            <figure>-->
<!--                                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/unsplash_nature2.jpg" alt="">-->
<!--                                <figcaption>-->
<!--                                    <p>landscape photography of brown mountain</p>-->
<!--                                    <p>Photo by <a href="https://unsplash.com/@wilstewart3" target="_blank">Wil Stewart</a></p>-->
<!--                                </figcaption>-->
<!--                            </figure>-->
<!--                        </li>-->
<!--                        <li>-->
<!--                            <figure>-->
<!--                                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/unsplash_nature3.jpg" alt="">-->
<!--                                <figcaption>-->
<!--                                    <p>blue starry night</p>-->
<!--                                    <p>Photo by <a href="https://unsplash.com/@ignitedit" target="_blank">Mark Basarab</a></p>-->
<!--                                </figcaption>-->
<!--                            </figure>-->
<!--                        </li>-->
<!--                        <li>-->
<!--                            <figure>-->
<!--                                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/unsplash_nature4.jpg" alt="">-->
<!--                                <figcaption>-->
<!--                                    <p>aerial island and beaches</p>-->
<!--                                    <p>Photo by <a href="https://unsplash.com/@phiestyphung" target="_blank">Amanda Phung</a></p>-->
<!--                                </figcaption>-->
<!--                            </figure>-->
<!--                        </li>-->

<!--                    </ol>-->

<!--                </div>-->
<!--            </section>-->



<section class="gallery">
    <div class="container">
        <div class="toolbar">
            <ul class="view-options">
                <li class="zoom">
                    <input type="range" min="180" max="380" value="280">
                </li>
                <li class="show-grid active">
                    <button disabled>
                        <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/grid-view.svg" alt="grid view">
                    </button>
                </li>
                <li class="show-list">
                    <button>
                        <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/list-view.svg" alt="list view">
                    </button>
                </li>
            </ul>
        </div>
        <ol class="image-list grid-view">
            <li>
                <figure>
                    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/unsplash_nature1.jpg" alt="">
                    <figcaption>
                        <p>green leafed trees</p>
                        <p>Photo by <a href="https://unsplash.com/@redcharlie" target="_blank">redcharlie</a></p>
                    </figcaption>
                </figure>
            </li>
            <li th:each="book: ${books}">
                <figure>
                    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/unsplash_nature1.jpg" alt="">
                    <figcaption>

                        <p th:text="${book.title}"></p>
                        <p th:text="${'Written By '+book.author}"><a href="https://unsplash.com/@redcharlie"
                                                                     target="_blank"></a></p>
                        <span><p th:text="${'#'+book.isbn}"></p></span>
                        <p th:text="${book.status}"></p>
                    </figcaption>
                </figure>
            </li>

        </ol>
    </div>
</section>
<script>


    // VARIABLES
    const rangeInput = document.querySelector('input[type = "range"]');
    const imageList = document.querySelector(".image-list");
    const searchInput = document.querySelector('input[type="search"]');
    const btns = document.querySelectorAll(".view-options button");
    const photosCounter = document.querySelector(".toolbar .counter span");
    const imageListItems = document.querySelectorAll(".image-list li");
    const captions = document.querySelectorAll(".image-list figcaption p:first-child");
    const myArray = [];
    let counter = 1;
    const active = "active";
    const listView = "list-view";
    const gridView = "grid-view";
    const dNone = "d-none";

    // SET VIEW
    for (const btn of btns) {
        btn.addEventListener("click", function() {
            const parent = this.parentElement;
            document.querySelector(".view-options .active").classList.remove(active);
            parent.classList.add(active);
            this.disabled = true;
            document.querySelector('.view-options [class^="show-"]:not(.active) button').disabled = false;

            if (parent.classList.contains("show-list")) {
                parent.previousElementSibling.previousElementSibling.classList.add(dNone);
                imageList.classList.remove(gridView);
                imageList.classList.add(listView);
            } else {
                parent.previousElementSibling.classList.remove(dNone);
                imageList.classList.remove(listView);
                imageList.classList.add(gridView);
            }
        });
    }

    // SET THUMBNAIL VIEW - CHANGE CSS VARIABLE
    rangeInput.addEventListener("input", function() {
        document.documentElement.style.setProperty("--minRangeValue",`${this.value}px`);
    });

    // SEARCH FUNCTIONALITY
    for (const caption of captions) {
        myArray.push({
            id: counter++,
            text: caption.textContent
        });
    }

    searchInput.addEventListener("keyup", keyupHandler);

    function keyupHandler() {
        for (const item of imageListItems) {
            item.classList.add(dNone);
        }
        const text = this.value;
        const filteredArray = myArray.filter(el => el.text.includes(text));
        if (filteredArray.length > 0) {
            for (const el of filteredArray) {
                document.querySelector(`.image-list li:nth-child(${el.id})`).classList.remove(dNone);
            }
        }
        photosCounter.textContent = filteredArray.length;
    }

    //search option


    document.addEventListener('DOMContentLoaded', function () {
        var searchInput = document.getElementById('searchInput');
        var searchResultsContainer = document.getElementById('searchResultsContainer');
        var searchResults = document.getElementById('searchResults');

        searchInput.addEventListener('input', function () {
            var searchText = searchInput.value.trim();

            if (searchText !== '') {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', '/books/search?title=' + encodeURIComponent(searchText), true);
                xhr.setRequestHeader('Content-Type', 'application/json');

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                        var books = JSON.parse(xhr.responseText);
                        showSearchResults(books);
                    }
                };

                xhr.send();
            } else {
                hideSearchResults();
            }
        });

        function showSearchResults(books) {
            // Clear previous search results
            searchResults.innerHTML = '';

            // Add new search results
            if (books.length > 0) {
                var ol = document.createElement('ol');
                ol.classList.add('search-results-list');

                books.forEach(function (book) {
                    var li = document.createElement('li');
                    li.innerHTML = '<figure>' +
                        '<img class="book-image" src="nature1.jpg" alt="">' +
                        '<figcaption>' +

                        '<p>' + book.title + '</p>' +
                        '<p>Written By ' + book.author + '</p>' +
                        '<p>#' + book.isbn + '</p>' +
                        '<p>' + book.status + '</p>' +
                        '</figcaption>' +
                        '</figure>';

                    ol.appendChild(li);
                });

                searchResults.appendChild(ol);
                searchResultsContainer.classList.add('show');
            } else {
                hideSearchResults();
            }
        }

        function hideSearchResults() {
            searchResultsContainer.classList.remove('show');
        }
    });

</script>
</body>
</html>
